<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="sim" default="false" />
    <arg name="dynamic_env" default="true" />

    <!-- start simulation when necessary -->
    <include file="$(find fetchit_challenge)/launch/main_rail_test.launch" if="$(arg sim)"/>

    <!-- Start 2D/3D Mapping -->
    <include file="$(find octomap_server)/launch/octomap_mapping.launch" />
    <include file="$(find fetch_navigation)/launch/build_map.launch" if="$(arg dynamic_env)">
        <arg name="slam_scan_topic" value="/base_scan_static" />
    </include>
    <include file="$(find fetch_navigation)/launch/build_map.launch" unless="$(arg dynamic_env)"/>


    <!-- start 2D dynamic obstacle fitlering -->
    <include file="$(find fetchit_mapping)/launch/filter_dynamic_obstacles.launch" if="$(arg dynamic_env)"/>

    <!-- rotate slowly about z, tilting head to save the generated 2D/3D map -->
    <node name="map_test" pkg="fetchit_mapping" type="challenge_mapping_node" output="screen" />

</launch>